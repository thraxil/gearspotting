<VirtualHost *:80>
  ServerName gearspotting.com
  ServerAdmin anders@columbia.edu
  CustomLog /var/log/apache2/gearspotting/access.log combined
  ErrorLog /var/log/apache2/gearspotting/error.log

RewriteEngine On
RewriteCond %{HTTP_HOST} ^www\.gearspotting\.com [NC]
RewriteRule (.*) http://gearspotting.com$1 [R=301,L]


  SetEnv DJANGO_SETTINGS_MODULE gearspotting.settings_production

  WSGIDaemonProcess site-gearspotting user=anders group=anders threads=5 python-path=/var/www/gearspotting/gearspotting/ve/lib/python2.6/site-packages
  WSGIProcessGroup site-gearspotting
  WSGIReloadMechanism Process

  WSGIScriptAlias / /var/www/gearspotting/gearspotting/apache/django.wsgi
  <Directory /var/www/gearspotting/gearspotting/apache>
    Order deny,allow
    Allow from all
  </Directory>

  Alias /site_media/ /var/www/gearspotting/gearspotting/media/
  Alias /favicon.ico /var/www/gearspotting/gearspotting/media/favicon.ico
  Alias /robots.txt /var/www/gearspotting/gearspotting/media/robots.txt
  <Directory /var/www/gearspotting/gearspotting/media/>
    Order deny,allow
    Allow from all
    FileETag None
    ExpiresActive on
    ExpiresDefault "access plus 10 years"
    AddOutputFilterByType DEFLATE text/css application/x-javascript
  </Directory>

  Alias /media/ /var/www/gearspotting/gearspotting/ve/lib/python2.6/site-packages/django/contrib/admin/media/
  <Directory /var/www/gearspotting/gearspotting/ve/lib/python2.6/site-packages/django/contrib/admin/media/>
    Order deny,allow
    Allow from all
    FileETag None
    ExpiresActive on
    ExpiresDefault "access plus 10 years"
    AddOutputFilterByType DEFLATE text/css application/x-javascript
  </Directory>

  Alias /uploads/ /var/www/gearspotting/uploads/
  <Directory /var/www/gearspotting/uploads/>
    Order deny,allow
    Allow from all
    FileETag None
    ExpiresActive on
    ExpiresDefault "access plus 10 years"
    AddOutputFilterByType DEFLATE text/css application/x-javascript
  </Directory>

</VirtualHost>
